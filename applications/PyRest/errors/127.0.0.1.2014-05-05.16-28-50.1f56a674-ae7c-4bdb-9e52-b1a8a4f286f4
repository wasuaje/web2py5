(dp1
S'output'
p2
S'<type \'exceptions.IOError\'> Cannot open resource "/PyRest/static/images/menu.jpeg"'
p3
sS'layer'
p4
S'/home/wasuaje/Documentos/desarrollo/web2py6/applications/PyRest/controllers/default.py'
p5
sS'code'
p6
S'# -*- coding: utf-8 -*-\n### required - do no delete\ndef user(): return dict(form=auth())\ndef download(): return response.download(request,db)\ndef call(): return service()\n### end requires\ndef index():\n\t""" \n\tSeteo todas las variables de sesion iniciales que se mantendran por todo el el sistema y \n\tque son de utilidad en multiples ocasiones. Empresa, usuarios, configuraciones por ejemplo\n\t"""\n\t#Query a la empresa y al usuario para obtener estos valores.\n\tsession.empresa  = session.empresa or {}\n\tsession.user  = session.user or {}\n\tcrow=db(db.cf_empresa.id > 0).select()\n\tcrow=len(crow)\n\tif crow>0:\n\t\trow= db(db.cf_empresa.id > 0).select().first()\t\n\t\tsession.empresa[\'id\']=row.id\n\t\tsession.empresa[\'nombre\']=row.nombre\n\t\tsession.empresa[\'razon\']=row.razon_social\n\t\tsession.empresa[\'rif\']=row.rif\n\t\tsession.empresa[\'nit\']=row.nit\n\t\tsession.empresa[\'email\']=row.email\n\t\tsession.empresa[\'direccion\']=row.direccion\n\t\tsession.empresa[\'telefono\']=row.tlf\n\t\tsession.empresa[\'ruta_foto\']=row.ruta_foto\n\t\n\n\t\t#print session.empresa\n\t\t"""session.user[id]\n\t\tsession.user[nombre]\n\t\tsession.user[usuario]#"""\n\t\tsession.user[\'usuario\']=\'wasuaje\'\n\t\n\treturn dict()\n\ndef error():\n    return dict()\n\ndef modulos():\n\tmydiv=[]\t\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'sistema.jpg\'), _alt="Punto de venta, POS",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'pos\',\'index\')), CENTER(P(B("Punto de Venta"))) , _class="img"))\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'meseros.jpeg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'configserv\',\'index\')), CENTER(P(B("Configurar servicio"))) , _class="img"))\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'meseros.jpeg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'configserv\',\'index\')), CENTER(P(B("Configurar servicio"))) , _class="img"))\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'meseros.jpeg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'configserv\',\'index\')), CENTER(P(B("Configurar servicio"))) , _class="img"))\t\n\t\n\tsrc="$(\'#modulos\').show(\'slow\');$(\'#modulos\').width(\'550px\');"\n\tmydiv2=DIV(DIV(H1(T("Modulos")), _class="title"),XML("".join(["%s" % (k) for k in mydiv])) , SCRIPT(src))\n\t\n\t  \n\treturn dict(mods=mydiv2)\n\ndef config():\n\tmydiv=[]\t\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'ico-inducom.png\'), _alt="Empresa actual",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'empresa\',\'index\')), CENTER(P(B("Empresa"))) , _class="img"))\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'parametro.jpg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'parametros\',\'index\')), CENTER(P(B("Parametros"))) , _class="img"))\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'usuarios.jpeg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'usuarios\',\'index\')), CENTER(P(B("User/Acces."))) , _class="img"))\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'inventario.jpg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'inventarios\',\'index\')), CENTER(P(B("Inventarios"))) , _class="img"))\t\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'graficos.jpeg\'), _alt="reportes ",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'default\',\'reportes\')), CENTER(P(B("Reportes"))) , _class="img"))\t\n\n\tsrc="$(\'#modulos\').show(\'slow\');$(\'#modulos\').width(\'550px\');"\n\t\n\tmydiv2=DIV(DIV(H1(T("Configuracion")), _class="title"),XML("".join(["%s" % (k) for k in mydiv])),  SCRIPT(src))\n\t\n\t\n\treturn dict(mydiv=mydiv2,)\n\ndef configprod():\n\tmydiv=[]\t\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'ico-inducom.png\'), _alt="Empresa actual",  _width="120", _height="120", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'categoria\',\'index\')), CENTER(P(B("Categorias"))) , _class="img"))\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'parametro.jpg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="120", _height="120", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'producto\',\'index\')), CENTER(P(B("Productos"))) , _class="img"))\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'usuarios.jpeg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="120", _height="120", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'ingrediente\',\'index\')), CENTER(P(B("Ingredientes"))) , _class="img"))\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'inventario.jpg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="120", _height="120", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'combro\',\'index\')), CENTER(P(B("Combos"))) , _class="img"))\t\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'inventario.jpg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="120", _height="120", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'ingprod\',\'index\')), CENTER(P(B("Ingred por Prod"))) , _class="img"))\t\t\t\t\t\t\t\t\t\t\t\n\t\n\n\tsrc="$(\'#modulos\').show(\'slow\');$(\'#modulos\').width(\'550px\');"\n\tmydiv2=DIV(DIV(H1(T("Productos y Categorias")), _class="title"),XML("".join(["%s" % (k) for k in mydiv])),SCRIPT(src))\t\n\t\n\n\treturn dict(mydiv=mydiv2)\n\ndef maestra():\n\tmydiv=[]\t\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'mesas.jpeg\'), _alt="mesas",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'mesas\',\'index\')), CENTER(P(B("Mesas"))) , _class="imgmed"))\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'meseros2.jpg\'), _alt="meseros",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'meseros\',\'index\')), CENTER(P(B("Meseros"))) , _class="imgmed"))\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'usuarios.jpeg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'ingrediente\',\'index\')), CENTER(P(B("Ingredientes"))) , _class="imgmed"))\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'inventario.jpg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'combro\',\'index\')), CENTER(P(B("Combos"))) , _class="imgmed"))\t\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'inventario.jpg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'ingprod\',\'index\')), CENTER(P(B("Ingred por Prod"))) , _class="imgmed"))\t\t\t\t\t\t\t\t\t\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'inventario.jpg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'combro\',\'index\')), CENTER(P(B("Combos"))) , _class="imgmed"))\t\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'inventario.jpg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'ingprod\',\'index\')), CENTER(P(B("Ingred por Prod"))) , _class="imgmed"))\t\t\t\t\t\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'inventario.jpg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'combro\',\'index\')), CENTER(P(B("Combos"))) , _class="imgmed"))\t\n\tmydiv.append(DIV(A(IMG(_src=URL(\'static/images\',\'inventario.jpg\'), _alt="categorias, productos, ingredientes, combos, etc.",  _width="80", _height="80", _class="none"),\n\t\t\t\t\t\t\t\t\t\t_href=URL(\'ingprod\',\'index\')), CENTER(P(B("Ingred por Prod"))) , _class="imgmed"))\t\t\t\t\t\n\n\tsrc="$(\'#modulos\').show(\'slow\');$(\'#modulos\').width(\'550px\');"\n\tmydiv2=DIV(DIV(H1(T("Productos y Categorias")), _class="title"),XML("".join(["%s" % (k) for k in mydiv])),SCRIPT(src))\t\t\n\treturn dict(mydiv=mydiv2)\n\ndef reportes():\n\treturn dict()\n\n\ndef rptproducto():\n\n\timport subprocess\n\timport os\t\n\t\n\t# Requerido si da errores de fuentes el jasperreport\n\t#sudo apt-get install msttcorefonts\n\t#\n\t\n\n\t#vieja manera de hacerlo\n\t#ruta=\'/home/wasuaje/Documentos/desarrollo/web2py5/applications\'\n\t#reporter=ruta+URL(\'static/jasperstarter/bin\',\'jasperstarter\')\t\n\t#report=ruta+URL(\'static/reports\',\'productos.jasper\')\n\t#reportgen=ruta+URL(\'static/rpts\',session.user[\'usuario\']+\'-productos\')\n\n\t#cambio reciente para trabajar en cualquier ruta\n\treporter=os.path.join(request.folder,\'static/jasperstarter/bin\',\'jasperstarter\')   \n\t\n\treport=os.path.join(request.folder,\'static/reports\',\'productos.jasper\')   \n\treportpdf=URL(\'static/rpts\',session.user[\'usuario\']+\'-productos.pdf\')\n\t\n\treportgen=os.path.join(request.folder,\'static/rpts\',session.user[\'usuario\']+\'-productos\')\n\tcmd=\'%s pr -t mysql -H localhost -u root -p www4214 -n dbPyRest -f pdf -i %s -o %s\' % (reporter,report,reportgen)\n\t\n\tp = subprocess.check_call(cmd, shell=True)\t\n\tredirect(reportpdf)\n\t#return dict(report=reportpdf)\t\n\ndef rptproducto2():\n# Let\'s import the wrapper\n    import pdf\n    from pdf.theme import colors, DefaultTheme\n\n    # and define a constant\n    TABLE_WIDTH = 540 # this you cannot do in rLab which is why I wrote the helper initially\n\n    # then let\'s extend the Default theme. I need more space so I redefine the margins\n    # also I don\'t want tables, etc to break across pages (allowSplitting = False)\n    # see http://www.reportlab.com/docs/reportlab-userguide.pdf\n    class MyTheme(DefaultTheme):\n        doc = {\n            \'leftMargin\': 25,\n            \'rightMargin\': 25,\n            \'topMargin\': 20,\n            \'bottomMargin\': 25,\n            \'allowSplitting\': False\n            }\n            \n    # let\'s create the doc and specify title and author\n    doc = pdf.Pdf(\'Productos 2\', \'wuelfhis asuaje\')\n\n    # now we apply our theme\n    doc.set_theme(MyTheme)\n\n    # time to add the logo at the top right\n    logo_path = URL(\'static\',\'/images/menu.jpeg\')\n    doc.add_image(logo_path, 180, 67, pdf.RIGHT)\n\n    # give me some space\n    doc.add_spacer()\n    \n    # this header defaults to H1\n    doc.add_header(\'Productos - 2\')\n\n    # here\'s how to add a paragraph\n    doc.add_paragraph("We are pleased to confirm your reservation with <b>%s</b>...")\n \n    doc.add_spacer()\t\n\n\n   # let\'s move on to the divers table\n\n    diver_table = [[\'Name\', \'Qualification\', \'Last dive\']] # this is the header row \n\n    for diver in cart.get_divers():\n        diver_table.append([diver.name, diver.qualification, diver.last_dive]) # these are the other rows\n\n    doc.add_table(diver_table, TABLE_WIDTH)\n\n\n \n\n    return doc.render()\n\n\nresponse._vars=response._caller(rptproducto2)\n'
p7
sS'snapshot'
p8
(dp9
sS'traceback'
p10
S'Traceback (most recent call last):\n  File "/home/wasuaje/Documentos/desarrollo/web2py6/gluon/restricted.py", line 220, in restricted\n    exec ccode in environment\n  File "/home/wasuaje/Documentos/desarrollo/web2py6/applications/PyRest/controllers/default.py", line 213, in <module>\n  File "/home/wasuaje/Documentos/desarrollo/web2py6/gluon/globals.py", line 385, in <lambda>\n    self._caller = lambda f: f()\n  File "/home/wasuaje/Documentos/desarrollo/web2py6/applications/PyRest/controllers/default.py", line 184, in rptproducto2\n    doc.add_image(logo_path, 180, 67, pdf.RIGHT)\n  File "applications/PyRest/modules/pdf/__init__.py", line 61, in add_image\n    img = Image(src, width, height)\n  File "/usr/lib/python2.7/dist-packages/reportlab/platypus/flowables.py", line 406, in __init__\n    f = open_for_read(filename, \'b\')\n  File "/usr/lib/python2.7/dist-packages/reportlab/lib/utils.py", line 447, in open_for_read\n    raise IOError(\'Cannot open resource "%s"\' % name)\nIOError: Cannot open resource "/PyRest/static/images/menu.jpeg"\n'
p11
s.